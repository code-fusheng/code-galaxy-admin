import{b as e,u as o,g as t,d as l,c as a}from"./index.eb4e575a.js";import{d as i,r,u as s,o as n,b as d,e as p,i as u,v as g,h as c,O as m,f as y,x as h}from"./vendor.3e4d1919.js";var f=i({data:()=>({repository:{repositoryName:"",remark:"",isEnabled:""},rules:{repositoryName:[{required:!0,message:"题库名称不能为空",tirgger:"blur"}],isEnabled:[{required:!0,message:"请选择题库状态",trigger:"change"}]},eventLoading:!1}),methods:{onSubmit(){this.eventLoading=!0,e(this.repository).then((e=>{this.eventLoading=!1,this.$emit("closeAddDialog"),this.$emit("getRepositoryByPage"),console.log(e)}))},close(){this.$emit("closeAddDialog")}}});const b=c("启用"),_=c("弃用"),C=c("提交"),k=c("取消");f.render=function(e,o,t,l,a,i){const c=r("el-input"),m=r("el-form-item"),y=r("el-col"),h=r("el-radio"),f=r("el-radio-group"),D=r("el-divider"),V=r("el-button"),z=r("el-row"),w=r("el-form"),v=s("loading");return n(),d("div",null,[p(w,{ref:"form",model:e.repository,rules:e.rules,"label-width":"80px",class:"demo-ruleForm"},{default:u((()=>[p(z,{gutter:20},{default:u((()=>[p(y,{span:12},{default:u((()=>[p(m,{label:"题库名称",prop:"repositoryName"},{default:u((()=>[p(c,{modelValue:e.repository.repositoryName,"onUpdate:modelValue":o[1]||(o[1]=o=>e.repository.repositoryName=o),placeholder:"请输入题库名称"},null,8,["modelValue"])])),_:1})])),_:1}),p(y,{span:12},{default:u((()=>[p(m,{label:"题库备注"},{default:u((()=>[p(c,{modelValue:e.repository.remark,"onUpdate:modelValue":o[2]||(o[2]=o=>e.repository.remark=o),placeholder:"请输入题库备注"},null,8,["modelValue"])])),_:1})])),_:1}),p(y,{span:12},{default:u((()=>[p(m,{label:"题库状态",prop:"isEnabled"},{default:u((()=>[p(f,{modelValue:e.repository.isEnabled,"onUpdate:modelValue":o[3]||(o[3]=o=>e.repository.isEnabled=o)},{default:u((()=>[p(h,{label:1},{default:u((()=>[b])),_:1}),p(h,{label:0},{default:u((()=>[_])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),p(D),p(y,{span:24},{default:u((()=>[g(p(V,{type:"primary",onClick:e.onSubmit,style:{float:"right","margin-left":"20px"},size:"mini"},{default:u((()=>[C])),_:1},8,["onClick"]),[[v,e.eventLoading]]),p(V,{onClick:e.close,type:"info",style:{float:"right"},size:"mini"},{default:u((()=>[k])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["model","rules"])])};var D=i({props:{repository:{type:Object,default:null}},data:()=>({rules:{repositoryName:[{required:!0,message:"题库名称不能为空",tirgger:"blur"}],isEnabled:[{required:!0,message:"请选择题库状态",trigger:"change"}]}}),methods:{onSubmit(){o(this.repository).then((e=>{this.$emit("closeUpdateDialog"),this.$emit("getRepositoryByPage")}))},close(){this.$emit("closeUpdateDialog")}}});const V=c("启用"),z=c("弃用"),w=c("提交"),v=c("取消");D.render=function(e,o,t,l,a,i){const s=r("el-input"),g=r("el-form-item"),c=r("el-col"),m=r("el-radio"),y=r("el-radio-group"),h=r("el-divider"),f=r("el-button"),b=r("el-row"),_=r("el-form");return n(),d("div",null,[p(_,{ref:"form",model:e.repository,rules:e.rules,"label-width":"80px",class:"demo-ruleForm"},{default:u((()=>[p(b,{gutter:20},{default:u((()=>[p(c,{span:12},{default:u((()=>[p(g,{label:"题库名称",prop:"repositoryName"},{default:u((()=>[p(s,{modelValue:e.repository.repositoryName,"onUpdate:modelValue":o[1]||(o[1]=o=>e.repository.repositoryName=o),placeholder:"请输入题库名称"},null,8,["modelValue"])])),_:1})])),_:1}),p(c,{span:12},{default:u((()=>[p(g,{label:"题库备注"},{default:u((()=>[p(s,{modelValue:e.repository.remark,"onUpdate:modelValue":o[2]||(o[2]=o=>e.repository.remark=o),placeholder:"请输入题库备注"},null,8,["modelValue"])])),_:1})])),_:1}),p(c,{span:12},{default:u((()=>[p(g,{label:"题库状态",prop:"isEnabled"},{default:u((()=>[p(y,{modelValue:e.repository.isEnabled,"onUpdate:modelValue":o[3]||(o[3]=o=>e.repository.isEnabled=o)},{default:u((()=>[p(m,{label:1},{default:u((()=>[V])),_:1}),p(m,{label:0},{default:u((()=>[z])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),p(h),p(c,{span:24},{default:u((()=>[p(f,{type:"primary",onClick:e.onSubmit,style:{float:"right","margin-left":"20px"},size:"mini"},{default:u((()=>[w])),_:1},8,["onClick"]),p(f,{onClick:e.close,type:"info",style:{float:"right"},size:"mini"},{default:u((()=>[v])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["model","rules"])])};var P=i({components:{RepositoryAdd:f,RepositoryUpdate:D},data:()=>({repository:{},page:{currentPage:1,pageSize:10,totalPage:0,totalCount:0,params:{repositoryName:""},list:[],sortColumn:"created_time",sortMethod:"asc"},ids:[],single:!0,multiple:!0,selectRepositorys:[],loading:!0,addDialog:!1,updateDialog:!1}),created(){this.getRepositoryByPage()},methods:{getRepositoryByPage(){t(this.page).then((e=>{this.page=e.data,this.loading=!1}))},toDelete(e){this.ids=[],e.repositoryId,this.ids=this.selectRepositorys,console.log("批量删除"+this.ids),m.confirm("是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{l(this.ids).then((e=>{this.getRepositoryByPage()}))})).catch((()=>{y.info("操作提示: 已取消删除!")}))},search(){this.page.currentPage=1,this.getRepositoryByPage()},refresh(){this.page.currentPage=1,this.page.params.repositoryName="",this.getRepositoryByPage()},handleSizeChange(e){this.page.pageSize=e,this.getRepositoryByPage()},handleCurrentChange(e){this.page.currentPage=e,this.getRepositoryByPage()},changeSort(e){e.order?(this.page.sortColumn=e.prop,this.page.sortMethod=e.order):(this.page.sortColumn="",this.page.sortMethod="asc"),this.getRepositoryByPage()},handleSelectionChange(e){this.selectRepositorys=e.map((e=>e.repositoryId)),this.single=1!==e.length,this.multiple=!e.length},openAddDialog(){this.addDialog=!0},openUpdateDialog(e){var o=e.repositoryId;void 0===o&&(o=this.selectRepositorys[0]),a(o).then((e=>{this.repository=e.data,this.updateDialog=!0}))},closeAddDialog(){this.addDialog=!1},closeUpdateDialog(){this.updateDialog=!1}}});const R=c("查询"),S=c("重置"),U=c("新增"),B=c("修改"),x=c("删除"),N=c("启用"),E=c("弃用"),A=c("修改"),$=c("查看"),q=c("启用"),j=c("弃用"),G=c("删除");P.render=function(e,o,t,l,a,i){const c=r("el-input"),m=r("el-form-item"),y=r("el-button"),f=r("el-col"),b=r("el-row"),_=r("el-form"),C=r("el-table-column"),k=r("el-tag"),D=r("el-table"),V=r("el-pagination"),z=r("repository-add"),w=r("el-dialog"),v=r("repository-update"),P=s("loading");return n(),d("div",null,[p(_,{inline:!0,model:e.page,class:"demo-form-inline",size:"mini"},{default:u((()=>[p(m,{label:"题库名称"},{default:u((()=>[p(c,{modelValue:e.page.params.repositoryName,"onUpdate:modelValue":o[1]||(o[1]=o=>e.page.params.repositoryName=o),placeholder:"请输入题库名称",clearable:""},null,8,["modelValue"])])),_:1}),p(m,null,{default:u((()=>[p(y,{type:"primary",icon:"el-icon-search",sizi:"mini",onClick:e.search},{default:u((()=>[R])),_:1},8,["onClick"]),p(y,{type:"success",icon:"el-icon-refresh-left",size:"mini",onClick:e.refresh},{default:u((()=>[S])),_:1},8,["onClick"])])),_:1}),p(b,{gutter:10,style:{"margin-bottom":"8px"}},{default:u((()=>[p(f,{span:1.5},{default:u((()=>[p(y,{type:"primary",icon:"el-icon-plus",size:"mini",onClick:e.openAddDialog},{default:u((()=>[U])),_:1},8,["onClick"])])),_:1},8,["span"]),p(f,{span:1.5},{default:u((()=>[p(y,{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single,onClick:e.openUpdateDialog},{default:u((()=>[B])),_:1},8,["disabled","onClick"])])),_:1},8,["span"]),p(f,{span:1.5},{default:u((()=>[p(y,{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple,onClick:e.toDelete},{default:u((()=>[x])),_:1},8,["disabled","onClick"])])),_:1},8,["span"])])),_:1})])),_:1},8,["model"]),g(p(D,{data:e.page.list,border:"",fit:"",style:{width:"100%"},"header-cell-style":{background:"#eef1f6",color:"#606266"},"row-style":{cursor:"pointer"},onSelectionChange:e.handleSelectionChange,onSortChange:e.changeSort},{default:u((()=>[p(C,{type:"selection","max-width":"50",align:"center"}),p(C,{prop:"repositoryId",label:"题库编号","show-overflow-tooltip":"",align:"center"}),p(C,{prop:"repositoryName",label:"题库名称","min-width":"200",align:"center",sortable:"custom","show-overflow-tooltip":""}),p(C,{prop:"questionCount",label:"试题数","show-overflow-tooltip":"",align:"center",sortable:"custom"}),p(C,{prop:"createdTime",label:"创建时间","show-overflow-tooltip":"",align:"center",sortable:"custom"}),p(C,{prop:"remark",label:"备注",align:"center","show-overflow-tooltip":""}),p(C,{prop:"isEnabled",label:"状态",align:"center"},{default:u((({row:e})=>[1===e.isEnabled?(n(),d(k,{key:0},{default:u((()=>[N])),_:1})):(n(),d(k,{key:1,type:"info"},{default:u((()=>[E])),_:1}))])),_:1}),p(C,{label:"操作","min-width":"200",align:"center"},{default:u((({row:o})=>[p(y,{type:"text",size:"mini",icon:"el-icon-edit",onClick:t=>e.openUpdateDialog(o)},{default:u((()=>[A])),_:2},1032,["onClick"]),p(y,{type:"text",size:"mini",icon:"el-icon-view"},{default:u((()=>[$])),_:1}),0===o.isEnabled?(n(),d(y,{key:0,type:"text",icon:"el-icon-check",size:"mini"},{default:u((()=>[q])),_:1})):h("",!0),1===o.isEnabled?(n(),d(y,{key:1,type:"text",icon:"el-icon-close",size:"mini"},{default:u((()=>[j])),_:1})):h("",!0),p(y,{type:"text",size:"mini",icon:"el-icon-delete",onClick:t=>e.toDelete(o)},{default:u((()=>[G])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange","onSortChange"]),[[P,e.loading]]),p(V,{align:"center",class:"pagination","current-page":e.page.currentPage,"page-sizes":[5,10,20,50],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.page.totalCount,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"]),p(w,{title:"添加题库",modelValue:e.addDialog,"onUpdate:modelValue":o[2]||(o[2]=o=>e.addDialog=o)},{default:u((()=>[p(z,{onCloseAddDialog:e.closeAddDialog,onGetRepositoryByPage:e.getRepositoryByPage},null,8,["onCloseAddDialog","onGetRepositoryByPage"])])),_:1},8,["modelValue"]),p(w,{title:"修改题库",modelValue:e.updateDialog,"onUpdate:modelValue":o[3]||(o[3]=o=>e.updateDialog=o)},{default:u((()=>[p(v,{repository:e.repository,onCloseUpdateDialog:e.closeUpdateDialog,onGetRepositoryByPage:e.getRepositoryByPage},null,8,["repository","onCloseUpdateDialog","onGetRepositoryByPage"])])),_:1},8,["modelValue"])])};export default P;
