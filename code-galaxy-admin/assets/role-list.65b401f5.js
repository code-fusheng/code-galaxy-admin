import{l as e}from"./role.02c7e5df.js";import{l as t,g as l}from"./menu.258f8845.js";import{d as i,r as n,u as a,o as d,b as o,e as s,i as r,v as u,h as c}from"./vendor.3e4d1919.js";import"./index.eb4e575a.js";const m=i({data:()=>({role:{},roleList:[],menuOptions:[],ids:[],single:!0,multiple:!0,selectMenuOpen:!1,selectRules:[],loading:!0,addDialog:!1,updateDialog:!1}),created(){this.listRole()},methods:{listRole(){e().then((e=>{this.roleList=e.data,this.loading=!1}))},handleSelectMenu(e){this.currentRoleId=e.roleId||this.ids[0],this.title="分配权限和菜单",this.selectMenuOpen=!0,t().then((e=>{this.menuOptions=this.$handleTree(e.data,"menuId"),console.log(this.menuOptions)})),l(this.currentRoleId).then((e=>{this.$refs.menu.setCheckedKeys(e.data)}))},handleSelectMenuSubmit(){},cancelSelectMenu(){this.selectMenuOpen=!1,this.menuOptions=[]}}}),p=c("新增"),h=c("修改"),f=c("删除"),b=c("启用"),g=c("弃用"),y=c("分配权限"),_=c("修改"),k=c("删除"),w={class:"dialog-footer"},x=c("确 定"),M=c("取 消");m.render=function(e,t,l,i,c,m){const O=n("el-button"),z=n("el-col"),S=n("el-row"),C=n("el-form"),I=n("el-table-column"),R=n("el-tag"),j=n("el-table"),v=n("el-tree"),L=n("el-dialog"),T=a("loading");return d(),o("div",null,[s(C,{inline:!0,model:e.role,class:"demo-form-inline",size:"mini"},{default:r((()=>[s(S,{gutter:10,style:{"margin-bottom":"8px"}},{default:r((()=>[s(z,{span:1.5},{default:r((()=>[s(O,{type:"primary",icon:"el-icon-plus",size:"mini"},{default:r((()=>[p])),_:1})])),_:1},8,["span"]),s(z,{span:1.5},{default:r((()=>[s(O,{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},{default:r((()=>[h])),_:1},8,["disabled"])])),_:1},8,["span"]),s(z,{span:1.5},{default:r((()=>[s(O,{type:"danger",icon:"el-icon-delete",size:"mini",disabled:e.multiple},{default:r((()=>[f])),_:1},8,["disabled"])])),_:1},8,["span"])])),_:1})])),_:1},8,["model"]),u(s(j,{data:e.roleList,border:"",fit:"",style:{width:"100%"}},{default:r((()=>[s(I,{type:"expand"}),s(I,{type:"index",label:"#",align:"center"}),s(I,{prop:"roleName","min-width":"100",label:"角色名称",align:"center"}),s(I,{prop:"createdTime",label:"创建时间","min-width":"220",align:"center",sortable:"custom"}),s(I,{prop:"updatedTime",label:"更新时间","min-width":"220",align:"center",sortable:"custom"}),s(I,{prop:"enable",label:"状态",width:"150",align:"center"},{default:r((({row:e})=>[1===e.isEnabled?(d(),o(R,{key:0},{default:r((()=>[b])),_:1})):(d(),o(R,{key:1,type:"info"},{default:r((()=>[g])),_:1}))])),_:1}),s(I,{prop:"remark","min-width":"100",label:"备注",align:"center"}),s(I,{label:"操作","min-width":"400",align:"center"},{default:r((({row:t})=>[s(O,{size:"mini",type:"text",icon:"el-icon-setting",onClick:l=>e.handleSelectMenu(t)},{default:r((()=>[y])),_:2},1032,["onClick"]),s(O,{size:"mini",type:"text",icon:"el-icon-edit"},{default:r((()=>[_])),_:1}),s(O,{size:"mini",type:"text",icon:"el-icon-delete"},{default:r((()=>[k])),_:1})])),_:1})])),_:1},8,["data"]),[[T,e.loading]]),s(L,{title:"分配权限和菜单",modelValue:e.selectMenuOpen,"onUpdate:modelValue":t[1]||(t[1]=t=>e.selectMenuOpen=t),width:"400px",center:"","append-to-body":""},{footer:r((()=>[s("span",w,[s(O,{type:"primary",size:"mini",onClick:e.handleSelectMenuSubmit},{default:r((()=>[x])),_:1},8,["onClick"]),s(O,{size:"mini",onClick:e.cancelSelectMenu},{default:r((()=>[M])),_:1},8,["onClick"])])])),default:r((()=>[s(v,{ref:"menu",data:e.menuOptions,"show-checkbox":"","node-key":"menuId","highlight-current":"","empty-text":"加载中，请稍后",props:{id:"menuId",children:"children",label:"name"}},null,8,["data"])])),_:1},8,["modelValue"])])};export default m;
